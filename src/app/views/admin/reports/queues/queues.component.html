<tabset>
  <tab>
      <ng-template tabHeading><i class="fa da-list"></i> اطلاعات صف ها </ng-template>
  <div class=" animated fadeIn row border-bottom justify-content-center">
    <div class="col-12">
      <div class="card card-accent-success">
        <div class="card-header">
          ریز اطلاعات صف ها
        </div>
        <div class="card-body">
  
          <div>
            <ngx-datatable 
            #queuesTable 
            class="material expandable" 
            [rows]="queueData" 
            [columnMode]="'force'"
              [headerHeight]="50" 
              [footerHeight]="50" 
              [rowHeight]="'auto'" 
            >
  
            <ngx-datatable-row-detail
            [rowHeight]="'auto'"
            #myDetailRow
            (toggle)="onDetailToggle($event)"
          >
            <ng-template
              let-row="row"
              let-expanded="true"
              ngx-datatable-row-detail-template
            >
            <div class="col-10">
              <div class="row">
                <div class="col-12 col-md-6 xol-lg-6 col-xl-2" *ngFor="let item of row.agents">
                  <strong><i class="fa fa-user text-black-50 mr-1"></i></strong>
                  {{item.name}}({{item.number}})</div>
              </div>
            </div>
            </ng-template>
          </ngx-datatable-row-detail>


            <ngx-datatable-column name="id" [width]="50">
              <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                <span class>شماره</span>
              </ng-template>

              <ng-template let-value="value" let-expanded="true" let-row="row" let-rowIndex="rowIndex"
                ngx-datatable-cell-template>
                <span>
                    {{value}}
                  </span>
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="name" [width]="80">
                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                    <span> عنوان صف </span>
                </ng-template>
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    {{value}}
                </ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column name="ringtime" [width]="80">
                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                    <span> متوسط زمان انتظار  </span>
                </ng-template>
                <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                    <div class="text-center">
                      {{value}}
                    </div>
                  </ng-template>
              </ngx-datatable-column>
  
              
              <ngx-datatable-column name="time" [width]="100">
                  <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                    <span (click)="sort()">متوسط زمان ‍‍‍پاسخ</span>
                  
                  </ng-template>
                  <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                      <div class="text-center">
                        {{value}}
                      </div>
                    </ng-template>
                </ngx-datatable-column>

  
            <ngx-datatable-column name="answer" [width]="100">
                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                  <span (click)="sort()">تعداد پاسخ داده شده</span>
                </ng-template>
                <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                    <div class="text-center">
                      {{value}}
                    </div>
                  </ng-template>
              </ngx-datatable-column>
  
  
            <ngx-datatable-column name="noanswer" [width]="100">
                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                  <span (click)="sort()">تعداد پاسخ داده نشده</span>
                </ng-template>
                <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                    <div class="text-center">
                      {{value}}
                    </div>
                  </ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column name="busy" [width]="100">
                  <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                    <span (click)="sort()">تعداد مشغول</span>
                  </ng-template>
                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                      <div class="text-center">
                        {{value}}
                      </div>
                    </ng-template>
                </ngx-datatable-column>

            <ngx-datatable-column name="performane" [width]="80">
              <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                <span (click)="sort()">عملکرد</span>
              </ng-template>
              <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                  <div class="text-center">
                    {{value}}
                  </div>
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="strategy" [width]="50">
              <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                <span (click)="sort()">روش پاسخ</span>
              </ng-template>
              <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                  <div class="text-center">
                    {{value}}
                  </div>
                </ng-template>
            </ngx-datatable-column>
      
            <ngx-datatable-column name="calls" [width]="100">
              <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                <span class>پاسخگوهای صف</span>
              </ng-template>

              <ng-template let-value="value" let-expanded="true" let-row="row" let-rowIndex="rowIndex"
                ngx-datatable-cell-template>
                <span>
                    {{value}}
                    <small>
                      <a 
                      *ngIf="value!='admin'"
                      href="javascript:void(0)"
                      [class.datatable-icon-left]="!expanded"
                      [class.datatable-icon-down]="expanded"
                      title="مشاهده اطلاعات بیشتر"
                      (click)="toggleExpandRow(row)"
                      class=""
                      >
                      مشاهده اعضای صف
                      </a>
                      </small> 
                  </span>
              </ng-template>
            </ngx-datatable-column>


            </ngx-datatable>
  
  
          </div>
  
        </div>
      </div>
    </div>
  </div>
</tab>

  <tab>
      <ng-template tabHeading><i class="fa da-list"></i> نمودار  کلی صف ها </ng-template>
    <div class=" animated fadeIn row border-bottom justify-content-center">
      <div class="col-5">
        <div class="row">
          <app-daterange #daterange></app-daterange>
          <button class="btn btn-success" (click)="getGeneralChartData()">دریافت اطلاعات</button>
        </div>
      </div>
        <div class="col-12 col-lg-12 col-xl-12">
            <div class="card">
                <div class="card-header">
                    نمودار وضعیت تماس ها
                    <div class="card-header-actions">
                    </div>
                </div>
                <div class="card-body">
                  <app-bar-chart
                  [datasets]="callsBarChartData"
                  [labels]="mainLabels"
                  ></app-bar-chart>
                    
                </div>
            </div>
        </div>

        <div class="col-12 col-lg-12 col-xl-12">
            <div class="card">
                <div class="card-header">
  نمودار مدت زمان انتظار و مکالمه
                    <div class="card-header-actions">
                    </div>
                </div>
                <div class="card-body">
                    <app-bar-chart
                    [datasets]="timesBarChartData"
                    [labels]="mainLabels"
                    isTimeChart='true'
                    ></app-bar-chart>
                    
                </div>
            </div>
        </div>

        <div class="col-12 col-lg-12 col-xl-12">
            <div class="card">
                <div class="card-header">
  نمودار میزان عملکرد(درصد)
                    <div class="card-header-actions">
                    </div>
                </div>
                <div class="card-body">
                    <app-bar-chart
                    [datasets]="serviceLevelbarChartData"
                    [labels]="mainLabels"
                    isPercentChart='true'
                    ></app-bar-chart>
                </div>
            </div>
        </div>

    </div>
  </tab>






  <tab>
      <ng-template tabHeading><i class="fa da-list"></i>  نمودار جزیی صف ها</ng-template>
      <div class=" animated fadeIn row border-bottom justify-content-center">
        <div class="col-12 pb-2" >
          <div class="row">
            <div class="col-3">
                <app-daterange #daterangeDetailsChart></app-daterange>
            </div>
            <div class="col-4">
                <div class="input-group">
                    <div class="input-group-prepend">
                      <label class="input-group-text">انتخاب صف</label>
                    </div>
                    <select
                      class="col form-control"
                      [formControl]="queueId"
                    >
                    <option *ngFor="let item of queueData" value="{{item.id}}" >
                      {{item.name}}
                    </option>
                    </select>
                  </div>
            </div>
            <div class="col-12 col-xl-2">
              <button class="btn btn-success" (click)="submitDetailedChartsFilter()">دریافت اطلاعات</button>
            </div>
          </div>
        </div>
            <div class="col-12 col-lg-12 col-xl-12">
                <div class="card">
                    <div class="card-header">
                        نمودار وضعیت تماس ها
                        <div class="card-header-actions">
                        </div>
                    </div>
                    <div class="card-body">
                      <app-bar-chart
                      [datasets]="callsBarChartDataDetails"
                      [labels]="detailsLabels"
                      ></app-bar-chart>
                        
                    </div>
                </div>
            </div>
    
            <div class="col-12 col-lg-12 col-xl-12">
                <div class="card">
                    <div class="card-header">
      نمودار مدت زمان انتظار و مکالمه
                        <div class="card-header-actions">
                        </div>
                    </div>
                    <div class="card-body">
                        <app-bar-chart
                        [datasets]="timesBarChartDataDetails"
                        [labels]="detailsLabels"
                        isTimeChart='true'
                        ></app-bar-chart>
                        
                    </div>
                </div>
            </div>
    
            <div class="col-12 col-lg-12 col-xl-12">
                <div class="card">
                    <div class="card-header">
      نمودار میزان عملکرد(درصد)
                        <div class="card-header-actions">
                        </div>
                    </div>
                    <div class="card-body">
                        <app-bar-chart
                        [datasets]="serviceLevelbarChartDataDetails"
                        [labels]="detailsLabels"
                        isPercentChart='true'
                        ></app-bar-chart>
                    </div>
                </div>
            </div>
    
        </div>
  </tab>
</tabset>